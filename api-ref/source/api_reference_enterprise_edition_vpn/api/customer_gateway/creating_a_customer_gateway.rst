:original_name: vpn_api_0021.html

.. _vpn_api_0021:

.. _en-us_topic_0000001807530292:

Creating a Customer Gateway
===========================

Function
--------

This API is used to create a customer gateway to which a VPN gateway connects.

Calling Method
--------------

For details, see :ref:`Calling APIs <en-us_topic_0000001807530276>`.

URI
---

POST /v5/{project_id}/customer-gateways

.. table:: **Table 1** Parameter description

   +------------+--------+-----------+---------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Type   | Mandatory | Description                                                                                                                           |
   +============+========+===========+=======================================================================================================================================+
   | project_id | String | Yes       | Specifies a project ID. You can obtain the project ID by referring to :ref:`Obtaining the Project ID <en-us_topic_0000001807530332>`. |
   +------------+--------+-----------+---------------------------------------------------------------------------------------------------------------------------------------+

Request
-------

-  Request parameters

   .. table:: **Table 2** Request parameters

      +------------------+-------------------------------------------------------------------------------------------------------------------+-----------+----------------------------------------+
      | Parameter        | Type                                                                                                              | Mandatory | Description                            |
      +==================+===================================================================================================================+===========+========================================+
      | customer_gateway | :ref:`CreateCgwRequestBodyContent <en-us_topic_0000001807530292__en-us_topic_0000001594578249_table92196>` object | Yes       | Specifies the customer gateway object. |
      +------------------+-------------------------------------------------------------------------------------------------------------------+-----------+----------------------------------------+

   .. _en-us_topic_0000001807530292__en-us_topic_0000001594578249_table92196:

   .. table:: **Table 3** CreateCgwRequestBodyContent

      +-----------------+---------------------------------------------------------------------------------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter       | Type                                                                                                          | Mandatory       | Description                                                                                                                                                                        |
      +=================+===============================================================================================================+=================+====================================================================================================================================================================================+
      | name            | String                                                                                                        | No              | -  Specifies the name of a customer gateway. If this parameter is not specified, a name in the format of **cgw-**\ ``****`` is automatically generated, for example, **cgw-21a3**. |
      |                 |                                                                                                               |                 | -  The value is a string of 1 to 64 characters, which can contain digits, letters, underscores (_), hyphens (-), and periods (.).                                                  |
      +-----------------+---------------------------------------------------------------------------------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | id_type         | String                                                                                                        | No              | -  Specifies the identifier type of a customer gateway.                                                                                                                            |
      |                 |                                                                                                               |                 | -  Value range:                                                                                                                                                                    |
      |                 |                                                                                                               |                 |                                                                                                                                                                                    |
      |                 |                                                                                                               |                 |    -  **ip**: The customer gateway is identified by an IP address.                                                                                                                 |
      |                 |                                                                                                               |                 |    -  **fqdn** (currently not supported): The customer gateway is identified by a full qualified domain name (FQDN).                                                               |
      |                 |                                                                                                               |                 |                                                                                                                                                                                    |
      |                 |                                                                                                               |                 | -  The default value is **ip**.                                                                                                                                                    |
      +-----------------+---------------------------------------------------------------------------------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | id_value        | String                                                                                                        | Yes             | -  Specifies the identifier of a customer gateway.                                                                                                                                 |
      |                 |                                                                                                               |                 | -  The value is a string of 1 to 128 characters. When **id_type** is set to **ip**, the value is an IPv4 address in dotted decimal notation, for example, 192.168.45.7.            |
      +-----------------+---------------------------------------------------------------------------------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | bgp_asn         | Long                                                                                                          | No              | -  Specifies the BGP AS number of the customer gateway.                                                                                                                            |
      |                 |                                                                                                               |                 | -  The value ranges from 1 to 4294967295.                                                                                                                                          |
      |                 |                                                                                                               |                 | -  Set this parameter only when **id_type** is set to **ip**.                                                                                                                      |
      +-----------------+---------------------------------------------------------------------------------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | tags            | Array of :ref:`VpnResourceTag <en-us_topic_0000001807530292__en-us_topic_0000001594578249_table92238>` object | No              | -  Specifies a tag list.                                                                                                                                                           |
      |                 |                                                                                                               |                 | -  A maximum of 20 tags can be specified.                                                                                                                                          |
      +-----------------+---------------------------------------------------------------------------------------------------------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   .. _en-us_topic_0000001807530292__en-us_topic_0000001594578249_table92238:

   .. table:: **Table 4** VpnResourceTag

      +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter       | Type            | Mandatory       | Description                                                                                                                                                                      |
      +=================+=================+=================+==================================================================================================================================================================================+
      | key             | String          | Yes             | -  Specifies a tag key.                                                                                                                                                          |
      |                 |                 |                 | -  The value is a string of 1 to 128 characters that can contain digits, letters, Spanish characters, Portuguese characters, spaces, and special characters (``_ . : = + - @``). |
      +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | value           | String          | Yes             | -  Specifies a tag value.                                                                                                                                                        |
      |                 |                 |                 | -  The value is a string of 0 to 255 characters that can contain digits, letters, Spanish characters, Portuguese characters, spaces, and special characters (``_ . : = + - @``). |
      +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example request

   .. code-block:: text

      POST https://{Endpoint}/v5/{project_id}/vpn/customer-gateways

      {
          "customer_gateway": {
              "name": "cgw-2abf",
              "id_type": "ip",
              "id_value": "10.***.***.21",
              "bgp_asn": 65000,
          }
      }

Response
--------

-  Response parameters

   Returned status code 201: successful creation

   .. table:: **Table 5** Parameters in the response body

      +------------------+---------------------------------------------------------------------------------------------------------------+----------------------------------------+
      | Parameter        | Type                                                                                                          | Description                            |
      +==================+===============================================================================================================+========================================+
      | customer_gateway | :ref:`ResponseCustomerGateway <en-us_topic_0000001807530292__en-us_topic_0000001594578249_table92199>` object | Specifies the customer gateway object. |
      +------------------+---------------------------------------------------------------------------------------------------------------+----------------------------------------+
      | request_id       | String                                                                                                        | Specifies a request ID.                |
      +------------------+---------------------------------------------------------------------------------------------------------------+----------------------------------------+

   .. _en-us_topic_0000001807530292__en-us_topic_0000001594578249_table92199:

   .. table:: **Table 6** ResponseCustomerGateway

      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Type                                                                                                                   | Description                                                                                                              |
      +=======================+========================================================================================================================+==========================================================================================================================+
      | id                    | String                                                                                                                 | -  Specifies the ID of a customer gateway.                                                                               |
      |                       |                                                                                                                        | -  The value is a UUID containing 36 characters.                                                                         |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | name                  | String                                                                                                                 | -  Specifies the name of a customer gateway.                                                                             |
      |                       |                                                                                                                        | -  The value is a string of 1 to 64 characters, which can contain digits, letters, underscores (_), and hyphens (-).     |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | id_type               | String                                                                                                                 | -  Specifies the identifier type of a customer gateway.                                                                  |
      |                       |                                                                                                                        | -  Value range:                                                                                                          |
      |                       |                                                                                                                        |                                                                                                                          |
      |                       |                                                                                                                        |    -  **ip**: The customer gateway is identified by an IP address.                                                       |
      |                       |                                                                                                                        |    -  **fqdn** (currently not supported): The customer gateway is identified by an FQDN.                                 |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | id_value              | String                                                                                                                 | Specifies the identifier of a customer gateway.                                                                          |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | bgp_asn               | Long                                                                                                                   | Specifies the BGP AS number of the customer gateway. This parameter is available only when **id_type** is set to **ip**. |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | created_at            | String                                                                                                                 | -  Specifies the time when the customer gateway is created.                                                              |
      |                       |                                                                                                                        | -  The UTC time format is *yyyy-MM-ddTHH:mm:ss.SSSZ*.                                                                    |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | updated_at            | String                                                                                                                 | -  Specifies the last update time.                                                                                       |
      |                       |                                                                                                                        | -  The UTC time format is *yyyy-MM-ddTHH:mm:ss.SSSZ*.                                                                    |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+
      | tags                  | Array of :ref:`VpnResourceTag <en-us_topic_0000001807530292__en-us_topic_0000001594578249_table4138248135518>` objects | Specifies a tag list.                                                                                                    |
      +-----------------------+------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------+

   .. _en-us_topic_0000001807530292__en-us_topic_0000001594578249_table4138248135518:

   .. table:: **Table 7** VpnResourceTag

      +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter             | Type                  | Description                                                                                                                                                                      |
      +=======================+=======================+==================================================================================================================================================================================+
      | key                   | String                | -  Specifies a tag key.                                                                                                                                                          |
      |                       |                       | -  The value is a string of 1 to 128 characters that can contain digits, letters, Spanish characters, Portuguese characters, spaces, and special characters (``_ . : = + - @``). |
      +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | value                 | String                | -  Specifies a tag value.                                                                                                                                                        |
      |                       |                       | -  The value is a string of 0 to 255 characters that can contain digits, letters, Spanish characters, Portuguese characters, spaces, and special characters (``_ . : = + - @``). |
      +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example response

   .. code-block::

      {
          "customer_gateway": {
              "id": "03c0aa3d-demo-a8df-va86-9d82473765d4",
              "name": "cgw-2abf",
              "id_type": "ip",
              "id_value": "10.***.***.21",
              "bgp_asn": 65000,
              "created_at": "2025-08-13T02:34:56.784574762Z",
              "updated_at": "2025-08-13T02:34:56.784574762Z"
          },
          "request_id": "7e0383bf-a7fb-461b-a926-baa8a795bf1a"
      }

Status Codes
------------

For details, see :ref:`Status Codes <en-us_topic_0000001807370508>`.
