:original_name: en_topic_0093011494.html

.. _en_topic_0093011494:

Querying IPsec VPN Connections
==============================

**Function**
------------

This interface is used to query IPsec VPN connections.

URI
---

GET /v2.0/vpn/ipsec-site-connections

Request Message
---------------

:ref:`Table 1 <en_topic_0093011494__table56415606>` describes the request parameters.

.. _en_topic_0093011494__table56415606:

.. table:: **Table 1** Request parameters

   +-----------+--------+-----------+--------------------------------------------------------------------------------------------------------------+
   | Parameter | Type   | Mandatory | Description                                                                                                  |
   +===========+========+===========+==============================================================================================================+
   | fields    | String | No        | Controls which parameters are returned. If this parameter is not specified, all parameters will be returned. |
   +-----------+--------+-----------+--------------------------------------------------------------------------------------------------------------+

.. note::

   The **project_id**, **peer_id**, **dpd**, and **local_id** parameters are not supported.

Response Message
----------------

:ref:`Table 2 <en_topic_0093011494__table46666290>` describes the response parameters.

.. _en_topic_0093011494__table46666290:

.. table:: **Table 2** Response parameters

   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter         | Type         | Description                                                                                                                                                            |
   +===================+==============+========================================================================================================================================================================+
   | peer_cidrs        | List<String> | (Deprecated) Specifies the tenant's CIDR blocks. The value is in the form of *<net_address > / < prefix >*.                                                            |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | mtu               | Integer      | Specifies the maximum transmission unit to address fragmentation.                                                                                                      |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | peer_ep_group_id  | String       | Specifies the endpoint group ID (tenant CIDR blocks).                                                                                                                  |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ikepolicy_id      | String       | Specifies the IKE policy ID.                                                                                                                                           |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dpd               | Object       | Specifies the DPD protocol control.                                                                                                                                    |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | route_mode        | String       | Specifies the route advertising mode. The default value is **static**.                                                                                                 |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | peer_address      | String       | Specifies the remote gateway address.                                                                                                                                  |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | peer_id           | String       | Specifies the remote gateway ID.                                                                                                                                       |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                | String       | Specifies the IPsec VPN connection ID.                                                                                                                                 |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description       | String       | Provides supplementary information about the IPsec VPN connection.                                                                                                     |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id        | String       | Specifies the project ID.                                                                                                                                              |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | interval          | Integer      | Specifies the DPD interval in seconds. The default value is **30**.                                                                                                    |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | timeout           | Integer      | Specifies the DPD timeout. The default value is 120 seconds.                                                                                                           |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | action            | String       | Specifies the DPD action. The value can be **clear**, **hold**, **restart**, **disabled**, or **restart-by-peer**. The default value is **hold**.                      |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpnservice_id     | String       | Specifies the VPN service ID.                                                                                                                                          |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | local_ep_group_id | String       | Specifies the endpoint group ID (VPC subnets).                                                                                                                         |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status            | String       | Specifies the IPsec VPN connection status. The value can be **ACTIVE**, **DOWN**, **BUILD**, **ERROR**, **PENDING_CREATE**, **PENDING_UPDATE**, or **PENDING_DELETE**. |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | psk               | String       | Specifies the pre-shared key.                                                                                                                                          |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | initiator         | String       | Specifies whether this VPN can only respond to connections or both respond to and initiate connections.                                                                |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name              | String       | Specifies the IPsec VPN connection name.                                                                                                                               |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | admin_state_up    | Boolean      | Specifies the administrative status. The value can be **true** or **false**.                                                                                           |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tenant_id         | String       | Specifies the project ID.                                                                                                                                              |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipsecpolicy_id    | String       | Specifies the IPsec policy ID.                                                                                                                                         |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | auth_mode         | String       | Specifies the authentication mode. The default value is **psk**.                                                                                                       |
   +-------------------+--------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Request
---------------

.. code-block:: text

   GET /v2.0/vpn/ipsec-site-connections

Example Response
----------------

.. code-block::

   {
     "ipsec_site_connections" : [ {
       "status" : "PENDING CREATE",
       "psk" : "secret",
       "initiator" : "bi-directional",
       "name" : "vpnconnection1",
       "admin_state_up" : true,
       "project_id" : "10039663455a446d8ba2cbb058b0f578",
       "tenant_id" : "10039663455a446d8ba2cbb058b0f578",
       "auth_mode" : "psk",
       "peer_cidrs" : [ ],
       "mtu" : 1500,
       "peer_ep_group_id" : "9ad5a7e0-6dac-41b4-b20d-a7b8645fddf1",
       "ikepolicy_id" : "9b00d6b0-6c93-4ca5-9747-b8ade7bb514f",
       "vpnservice_id" : "5c561d9d-eaea-45f6-ae3e-08d1a7080828",
       "dpd" : {
         "action" : "hold",
         "interval" : 30,
         "timeout" : 120
       },
       "route_mode" : "static",
       "ipsecpolicy_id" : "e6e23d0c-9519-4d52-8ea4-5b1f96d857b1",
       "local_ep_group_id" : "3e1815dd-e212-43d0-8f13-b494fa553e68",
       "peer_address" : "172.24.4.226",
       "peer_id" : "172.24.4.226",
       "id" : "851f280f-5639-4ea3-81aa-e298525ab74b",
       "description" : ""
     } ]
   }

Returned Values
---------------

For details, see section :ref:`Common Returned Values <en_topic_0093011522>`.
